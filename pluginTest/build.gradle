buildscript {
    repositories {
        flatDir name: "parentbuild", dirs: ["${projectDir}/../build/libs"];
    }
    dependencies {
        classpath "net.sourceforge.purrpackage:purrpackage-gradle-plugin:${pluginVersion}"
    }
}

repositories {
     mavenLocal();
     mavenCentral();
}

apply plugin: 'groovy'
apply plugin: 'eclipse'

apply plugin: 'purrpackage'


dependencies {
     groovy localGroovy()
     testCompile "org.testng:testng:5.8:jdk15@jar"
     testCompile "junit:junit:4.8.2"
}

test {
     useTestNG() 
}

// FIXME
// The purrpackage plugin adds a cobertura system property
// and a TestNG listener to test tasks. So it needs them
// to be declared before applied.

task testJUnit( type: Test ) {
        include "**/*JUnitTest.class";
        testReportDir = file( "${buildDir}/junit-report" );
}

check.dependsOn( testJUnit )
